sources:
  input_file:
    type: file
    include:
      - /home/vector-log/*.log

transforms:
  transform_json:
    type: remap
    inputs:
      - input_file
    source: |-
      . = parse_json!(string!(.message))
  filter_agent:
    type: filter
    inputs:
      - transform_json
    condition: 
      type: "vrl"
      source: ."user-agent" == "no-agent"

sinks:
  output_std:
    type: console
    inputs:
      - filter_agent
    encoding:
      codec: json